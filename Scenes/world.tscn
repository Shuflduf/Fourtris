[gd_scene load_steps=10 format=3 uid="uid://bey7iu5tc1cjs"]

[ext_resource type="Texture2D" uid="uid://d3pdbkoe7i6n3" path="res://Assets/SkyHDR.hdr" id="1_se6jm"]
[ext_resource type="MeshLibrary" uid="uid://f53i3u6nmcb5" path="res://Assets/Cubes.meshlib" id="2_ahqo1"]
[ext_resource type="Script" path="res://Scripts/GridMap.gd" id="3_1fno7"]
[ext_resource type="PackedScene" uid="uid://3pugnnoo06g8" path="res://Assets/fourtris board.glb" id="4_kgxy6"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_lvpja"]
panorama = ExtResource("1_se6jm")

[sub_resource type="Sky" id="Sky_kgqvc"]
sky_material = SubResource("PanoramaSkyMaterial_lvpja")

[sub_resource type="Environment" id="Environment_eml8j"]
background_mode = 2
sky = SubResource("Sky_kgqvc")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="BoxShape3D" id="BoxShape3D_lvr7f"]
size = Vector3(15, 4, 3)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1xdhy"]
albedo_color = Color(0.172549, 0.172549, 0.172549, 1)

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_eml8j")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866027, -0.43301, 0.249997, 5.68659e-08, 0.499998, 0.866026, -0.499997, -0.750003, 0.433012, 0, 0, 0)
shadow_enabled = true

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource("2_ahqo1")
cell_center_z = false
data = {
"cells": PackedInt32Array(720890, 0, 7, 655365, 0, 7, 589829, 0, 7, 524293, 0, 7, 458757, 0, 7, 393221, 0, 7, 327685, 0, 7, 262149, 0, 7, 196613, 0, 7, 131077, 0, 7, 65541, 0, 7, 5, 0, 7, -65531, 0, 7, -131067, 0, 7, -196603, 0, 7, -262139, 0, 7, -327675, 0, 7, -393211, 0, 7, -458747, 0, 7, -524283, 0, 7, -589819, 0, 7, -655355, 0, 7, -720891, 0, 7, -720892, 0, 7, -720893, 0, 7, -720894, 0, 7, -720895, 0, 7, -720896, 0, 7, -655361, 0, 7, -655362, 0, 7, -655363, 0, 7, -655364, 0, 7, -655365, 0, 7, -655366, 0, 7, -589830, 0, 7, -524294, 0, 7, -458758, 0, 7, -393222, 0, 7, -327686, 0, 7, -262150, 0, 7, -196614, 0, 7, -131078, 0, 7, -65542, 0, 7, -6, 0, 7, 65530, 0, 7, 131066, 0, 7, 196602, 0, 7, 262138, 0, 7, 393210, 0, 7, 458746, 0, 7, 524282, 0, 7, 589818, 0, 7, 655354, 0, 7, 327674, 0, 7, 720901, 0, 7, 786437, 0, 7, 851973, 0, 7, 917509, 0, 7, 983045, 0, 7, 1048581, 0, 7, 1114117, 0, 7, 786426, 0, 7, 851962, 0, 7, 917498, 0, 7, 983034, 0, 7, 1048570, 0, 7, 1114106, 0, 7, 1179642, 0, 7)
}
script = ExtResource("3_1fno7")
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="placementDelayTimer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 35)

[node name="fourtris board" parent="." instance=ExtResource("4_kgxy6")]
visible = false

[node name="UI" type="Node3D" parent="."]

[node name="Label3D" type="Label3D" parent="UI"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 23, 20, 0)
text = "woohoo tetris"
font_size = 587
outline_size = 0

[node name="CSGBox3D" type="CSGBox3D" parent="UI"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 8, 0)
visible = false
size = Vector3(10, 6, 1)

[node name="Gameover" type="Node3D" parent="UI"]

[node name="YouLose" type="Label3D" parent="UI/Gameover"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 20, 4)
text = "YOU LOSE"
font_size = 2117
outline_size = 0

[node name="Restart" type="Label3D" parent="UI/Gameover"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, 4)
text = "Restart?"
font_size = 717
outline_size = 0

[node name="Button" type="Area3D" parent="UI/Gameover"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="UI/Gameover/Button"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, 2)
shape = SubResource("BoxShape3D_lvr7f")

[node name="CSGBox3D" type="CSGBox3D" parent="UI/Gameover/Button"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, 2)
size = Vector3(15, 4, 3)
material = SubResource("StandardMaterial3D_1xdhy")

[connection signal="timeout" from="placementDelayTimer" to="GridMap" method="_on_placement_delay_timer_timeout"]
[connection signal="input_event" from="UI/Gameover/Button" to="GridMap" method="_on_button_input_event"]
